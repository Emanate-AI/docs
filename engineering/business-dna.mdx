---
title: "Business DNA"
description: "Brand extraction and context system"
---

# Business DNA

Business DNA is Emanate's brand context system. It extracts brand identity from websites and provides consistent context to all AI agents.

<Note>
  **Updated in v2.4**: More reliable extraction with improved scraping, better color detection, and enhanced GPT synthesis. See [Release Notes](/about/release-notes) for details.
</Note>

## Overview

```
URL Input → Extraction Pipeline → Brand Context → Agent Prompts
```

Business DNA ensures every agent:
- Knows your company name and products
- Uses your brand tone and personality
- References accurate information
- Feels authentic to your brand

## Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                     BusinessDNAEditor                            │
│                      (4-step wizard)                             │
├─────────────────────────────────────────────────────────────────┤
│ Step 1: URL Input                                                │
│ Step 2: Extraction (Trigger.dev task)                           │
│ Step 3: Brand Assets Review                                      │
│ Step 4: Agent Context Configuration                              │
└─────────────────────────────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────────────────────────┐
│              Extraction Pipeline                                 │
├─────────────────────────────────────────────────────────────────┤
│  1. Scraper     → HTML, images, colors, fonts                   │
│  2. Exa         → Deep content, subpages, competitors           │
│  3. Analyzer    → GPT synthesis of all data                     │
│  4. Image Gen   → Style previews (Haiku + Flash)                │
└─────────────────────────────────────────────────────────────────┘
```

## Extraction Process

### Step 1: Scraper

Direct website scraping for visual assets:

| Field | Method |
|-------|--------|
| Logo | og:logo, JSON-LD, header img, SVG |
| Favicon | link rel="icon" |
| Colors | theme-color, CSS, logo analysis |
| Fonts | Google Fonts, @font-face |
| Images | og:image, hero images |

### Step 2: Exa Deep Search

AI-powered content extraction:

```typescript
// 5 parallel Exa calls
const results = await Promise.all([
  exa.searchAndContents(`site:${domain}`, { subpages: 10 }),
  exa.searchAndContents(`linkedin.com/company ${companyName}`),
  exa.searchAndContents(`${companyName} news OR press release`),
  exa.findSimilarAndContents(url),  // Competitors
  exa.searchAndContents(domain, { summary: true })
]);
```

### Step 3: GPT Synthesis

AI analyzes all data and generates:

| Field | Source |
|-------|--------|
| businessName | GPT from site content |
| tagline | GPT from homepage |
| industry | GPT from LinkedIn + content |
| productsServices | GPT from product pages |
| targetAudience | GPT from testimonials |
| visualStyles | GPT from logo + images |
| toneStyles | GPT from content analysis |
| brandValues | GPT from about page |

### Step 4: Image Generation

Style previews generated automatically:

| Model | Purpose | Resolution |
|-------|---------|------------|
| Claude Haiku + Gemini Flash | Previews | 1K |
| Claude Opus + Gemini Pro | Production | 4K |

## Extracted Fields

### Company Information

```typescript
interface BusinessDNA {
  // Core Identity
  businessName: string;
  tagline: string;
  industry: string;
  businessOverview: string;
  
  // Offerings
  productsServices: string[];
  targetAudience: string;
  keyDifferentiators: string[];
  
  // Brand
  brandColors: BrandColor[];
  visualStyles: string[];
  toneStyles: string[];
  brandValues: string[];
  
  // Assets
  logoUrl: string;
  faviconUrl: string;
  images: string[];
  fonts: BrandFont[];
  
  // Context
  competitors: string[];
  socialLinks: SocialLinks;
  companyAddress: string;
}
```

### Extraction Patterns

| Pattern | Fields | Behavior |
|---------|--------|----------|
| **First-Match** | logoUrl, faviconUrl | First valid result wins |
| **Aggregated** | colors, fonts | All sources combined |
| **Merged** | images, socialLinks | All sources contribute |
| **GPT-Synthesized** | industry, tagline | Created from content |

## Using Business DNA

### In Agent Prompts

Business DNA is injected into system prompts:

```markdown
## Company Context
Business: {{businessName}}
Tagline: {{tagline}}
Industry: {{industry}}
Products: {{productsServices}}
Target Audience: {{targetAudience}}

## Brand Voice
Tone: {{toneStyles}}
Values: {{brandValues}}
```

### Agent Context Settings

Configure how agents represent your brand:

| Setting | Options |
|---------|---------|
| Personality | Professional, Friendly, Technical |
| Tone | Formal, Conversational, Casual |
| Boundaries | Topics to avoid |
| Escalation | When to transfer |

## Caching System

### Three Cache Layers

```
┌─────────────────────────────────────────────────────────────────┐
│  MEMORY (React State)                                            │
│  - Fastest access                                                │
│  - Cleared on page refresh                                       │
├─────────────────────────────────────────────────────────────────┤
│  DATABASE (Supabase business_dna table)                          │
│  - Persists across sessions                                      │
│  - Validated by brandSignature                                   │
├─────────────────────────────────────────────────────────────────┤
│  STORAGE (Supabase brand-assets bucket)                          │
│  - Actual image files                                            │
│  - Permanent until deleted                                       │
└─────────────────────────────────────────────────────────────────┘
```

### Cache Invalidation

Changes to these fields invalidate the cache:

```typescript
const signatureFields = [
  "businessName",
  "tagline", 
  "industry",
  "businessOverview",
  "productsServices",
  "brandColors",
  "visualStyles",
  "toneStyles",
  "targetAudience"
];
```

## Trigger.dev Tasks

| Task | Purpose |
|------|---------|
| `extract-brand` | Full extraction pipeline |
| `image-agent` | Brand image optimization |

## API Dependencies

| Service | Purpose |
|---------|---------|
| **Exa** | Deep content extraction |
| **OpenAI** | GPT analysis |
| **Anthropic** | Image prompts |
| **Gemini** | Image generation |

## Troubleshooting

<AccordionGroup>
  <Accordion title="Extraction fails">
    - Verify URL is accessible
    - Check for bot protection
    - Try with different URL format
  </Accordion>
  <Accordion title="Missing logo/colors">
    - Check if logo is SVG or embedded
    - Verify colors aren't in external CSS
    - Manual upload as fallback
  </Accordion>
  <Accordion title="Incorrect information">
    - Review and edit extracted data
    - Add manual corrections
    - Re-run extraction if major issues
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Architecture" icon="sitemap" href="/engineering/architecture">
    System overview
  </Card>
  <Card title="Voice Agents" icon="phone" href="/agents/voice-agents">
    Using Business DNA in agents
  </Card>
</CardGroup>
